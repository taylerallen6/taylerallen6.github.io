<!DOCTYPE html>
<html lang="en">

  <head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Tayler Allen - Tech Philosopher</title>

    <!-- Bootstrap core CSS -->
    <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom fonts for this template -->
    <link href="vendor/fontawesome-free/css/all.min.css" rel="stylesheet" type="text/css">
    <link href='https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>

    <!-- Custom styles for this template -->
    <link href="css/clean-blog.min.css" rel="stylesheet">

  </head>

  <body>

    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-light fixed-top" id="mainNav">
      <div class="container">
        <a class="navbar-brand" href="index.html">Tayler Allen</a>
        <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
          Menu
          <i class="fas fa-bars"></i>
        </button>
        <div class="collapse navbar-collapse" id="navbarResponsive">
          <ul class="navbar-nav ml-auto">
            <li class="nav-item">
              <a class="nav-link" href="index.html">Home</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="about.html">About</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="contact.html">Contact</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <!-- Page Header -->
    <header class="masthead" style="background-image: url('img/post-bg.jpg')">
      <div class="overlay"></div>
      <div class="container">
        <div class="row">
          <div class="col-lg-8 col-md-10 mx-auto">
            <div class="post-heading">
              <h1>Unity Machine Learning</h1>
              <h2 class="subheading">A quick and easy approach to training your own python ML agents in Unity3D.</h2>
              <span class="meta">Posted by
                <a href="https://github.com/taylerallen6">taylerallen6</a>
                on December 7, 2018</span>
            </div>
          </div>
        </div>
      </div>
    </header>

    <!-- Post Content -->
    <article>
      <div class="container">
        <div class="row">
          <div class="col-lg-8 col-md-10 mx-auto">
            <h2 class="section-heading">UnityML</h2>

            <p>This code is the bare necessity needed to connect to a Unity ML agent. The full documentation can be found on my github <a href="https://github.com/taylerallen6/UnityML">here</a>.</p>

            <p>It is important to note, this code is from The <a href="https://github.com/Unity-Technologies/ml-agents">Unity ML-Agents</a> repository. The difference is the added <a href="https://github.com/taylerallen6/UnityML/blob/master/ml-agents-master/python/train_your_agent.py">train_your_agent.py</a> file which is a script I stitched together from their tutorials. The script connects to a Unity environment, retrieves input and reward data, and sends output data back to the Unity environment to be performed. As is, when the script is run, a small dislay for the unity environment will open and a few iterations will be ran, taking random actions. Then the display window will close. These random actions represent the decisions of a python AI and should be replaced by your own python AI's decision making function. More will be discussed of the script itself later.</p>

            <p>This tutorial uses an older version of <a href="https://github.com/Unity-Technologies/ml-agents">Unity ML-Agents</a>. These steps may not work with the most recent version of <a href="https://github.com/Unity-Technologies/ml-agents">ML-Agents</a>. For that, it is recommended that you use the version in the repository. It is also recommended that you create a virtual environment for this project. This will give you a clean slate for the installing the packages. If you do not use a virtual environment and you have already installed a version of unityagents, it may not work with tutorial.</p>

            <p>The meat of this repository is the <a href="https://github.com/taylerallen6/UnityML/blob/master/ml-agents-master/python/train_your_agent.py">train_your_agent.py</a> file located in the ml-agents-master/python/ folder. If you're just interested in how python interacts with Unity in the simplest of examples, check out this file. Else, continue with the setup process to get everything up and running. Keep in mind, this python script will not work alone.</p>

            <br/>

            <h2>Setup</h2>

            <b>Install</b>
            
            <ul>
              <li>
                1. Clone this repository.
              </li>
              <li>
                2. If you're using a virtual environment, activate it now.
              </li>
              <li>
                3. In the terminal, navigate to the python/ folder located in the ml-agents-master/ folder.
              </li>
              <li>
                4. Once inside the python/ folder, run the command 'pip3 install .' (don't forget the period) to install everything you need for this tutorial.
              </li>
            </ul>
              
            <br/>

            <b>Unity</b>

            <ul>
              <li>
                5. Now that the installs are complete, open the Unity editor and create a new project.
              </li>
              <li>
                6. Once open, go to Edit -> Project Settings -> Player. Then, in the inspector, under 'Other Settings', make sure that Scripting Runtime Version is set to '.NET 4.x Equivalent'.
              </li>
              <li>
                7. This should prompt you to restart the Unity editor. Do so and continue.
              </li>
              <li>
                8. In your file explorer (or terminal), locate the ML-Agents/ folder in the ml-agents-master/unity-environment/Assets/ folder. Once found, copy the ML-Agents/ folder to the Assets/ folder of your new Untiy project.
              </li>
              <li>
                9. In the Unity editor (REMEMBER, this is now in the Unity editor, not your terminal or file explorer), navigate to the 3DBall/ folder located in the Assets/ML-Agents/Examples/ folder. Once in the 3DBall/ folder, double click the 3DBall.unity object to the open the 3DBall environment in the hierarchy.
              </li>
              <li>
                10. In the project Hierarchy, select the Ball3DBrain object within the Ball3DAcademy object.
              </li>
              <li>
                11. Now, in the inspector, make sure Brain Type is set to 'External'. This is important for your python script to interact with the Unity brain.
              </li>
              <li>
                12. Finally, go to File -> Build Settings. Select the intended Platform (most likely PC, Mac & Linux Standalone) and select a Taget Platform and Architecture in the dropdown menus. Then hit Build, give it a name, and set the location to the same python/ folder from above, located in the ml-agents-master/ folder. The location is important so make sure this step is done correctly.
              </li>
            </ul>

            <br/>

            <b>Run</b>

            <ul>
              <li>
                13. Once the build is successful, navigate back to the python/ folder, again, located in the ml-agents-master/ folder.
              </li>
              <li>
                14. There you will find a python file named <a href="https://github.com/taylerallen6/UnityML/blob/master/ml-agents-master/python/train_your_agent.py">train_your_agent.py</a>. This is the script that contains the bare-necessities needed to connect your python AI with Unity. Open the <a href="https://github.com/taylerallen6/UnityML/blob/master/ml-agents-master/python/train_your_agent.py">train_your_agent.py</a> file in any text editor.
              </li>
              <li>
                15. The first line should say something like 'env_name = "unity_executable"'. Replace the 'unity_executable' within the double quotes with the name of the Unity executable you just built. Note, you do NOT need the include the .extention with the name.
              </li>
              <li>
                16. Also note that, if you were following along correctly, the <a href="https://github.com/taylerallen6/UnityML/blob/master/ml-agents-master/python/train_your_agent.py">train_your_agent.py</a> and the Unity executable you just built, are in the same folder. This is important or the script will not be able to find the Unity executable. (unless you specify the correct path youreslf)
              </li>
              <li>
                17. Last but not least, while still in the python/ folder, again, located in the ml-agents-master/ folder, run 'python3 train_your_agent.py' in the terminal.
              </li>
            </ul>

            <br/>

            <h3>That's it!</h3>

            <p>A small window should open and run the Unity environment for 20 episodes and close. The terminal will show a few details as well.</p>


            <b>More details explaining the python code within the script itself are soon to come...<b>
          </div>
        </div>
      </div>
    </article>

    <hr>

    <!-- Footer -->
    <footer>
      <div class="container">
        <div class="row">
          <div class="col-lg-8 col-md-10 mx-auto">
            <ul class="list-inline text-center">
              
              <li class="list-inline-item">
                <a href="https://www.linkedin.com/in/tayler-allen-57aa98101/">
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fab fa-linkedin fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li class="list-inline-item">
                <a href="https://twitter.com/taylerallen6">
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fab fa-twitter fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li class="list-inline-item">
                <a href="https://www.facebook.com/tayler.allen.77">
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fab fa-facebook-f fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li class="list-inline-item">
                <a href="https://github.com/taylerallen6">
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fab fa-github fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              
            </ul>
            <p class="copyright text-muted">Copyright &copy; Your Website 2018</p>
          </div>
        </div>
      </div>
    </footer>

    <!-- Bootstrap core JavaScript -->
    <script src="vendor/jquery/jquery.min.js"></script>
    <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

    <!-- Custom scripts for this template -->
    <script src="js/clean-blog.min.js"></script>

  </body>

</html>
